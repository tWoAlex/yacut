# Укоротитель ссылок YaCut

Веб-приложение, которое позволяет укорачивать ссылки.
Имеет веб-интерфейс и API.

---
#### Установка:
```
git clone git@github.com:tWoAlex/yacut.git
```

---
#### Запуск:

1. Создай и включи виртуальное окружение:

Windows:
```
python -m venv venv
```
```
source venv/Scripts/activate
```
Linux:
```
python -m venv env
```
```
source venv/bin/activate
```

2. Установи библиотеки:
```
pip install -r requirements.txt
```

3. Создай файл `.env` в корне проекта для секретных параметров:
```
FLASK_APP=yacut
FLASK_ENV={{ development для разработки или production для публичного запуска}}
DATABASE_URI={{ драйвер+адрес БД по спецификации SQLAlchemy (docs.sqlalchemy.org/en/14/core/engines.html)  }}
# Для локального тестирования можно использовать "sqlite:///db.sqlite3"
SECRET_KEY={{ секретный ключ шифрования для твоего проекта }}
```

4. Инициируй базу данных:
```
flask db init     # Создаёт репозиторий с миграциями БД
```
```
flask db migrate  # Готовит миграцию в актуальное состояние
```
```
flask db upgrade  # Выполняет миграцию в актуальное состояние
```

5. Запусти приложение:
```
flask run
```

---
### Веб-приложение:
* Главная страница доступна по адресу `{{ Хост }}/`. Она содержит форму для создания короткой ссылки.
* Переход по адресу `{{ Хост }}/{{ Короткий ID ссылки }}` вызовет переадресацию на 

### API:

1. `{{ Хост }}/api/id/` принимает запросы на создание короткой ссылки.

Формат запроса (POST):
```
{
    "url": "{{ Длинная ссылка }}",
    "custom_id": "{{ Короткий ID }}" # (опционально)
}
```
Формат ответа:
```
{
    "url": "{{ Длинная ссылка }}",
    "short_link": "{{ Короткая ссылка }}"
}
```

2. `{{ Хост }}/api/id/{{ short_id }}/` принимает GET-запрос на выдачу оригинальной ссылки.

Формат ответа:
```
{
    "url": "{{ Длинная ссылка }}"
}
```

Подробная спецификация API есть в файле `openapi.yml` в корне проекта.
Открыть и прочитать его можно в онлайн-редакторе, например [**Swagger.io**](https://editor.swagger.io/).

---
### О проекте:

#### Построен на: [**Flask 2.0**](https://flask.palletsprojects.com/en/2.0.x/) с использованием ORM SQLAlchemy под обёрткой [**Flask-SQLAlchemy 2.5**](https://flask-sqlalchemy.palletsprojects.com/en/2.x/).
#### Автор: Александр Муравякин, **[t.me/tWoAlex](https://t.me/tWoAlex)**